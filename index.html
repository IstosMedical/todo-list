<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ISTOS Todo List Grid</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

<body>
  <header class="header">
    <h2 class="title">Todo List</h2>
    <div class="logo-container">
      <img src="istos-logo.png" alt="ISTOS Logo" class="logo" />
    </div>
  </header>

  <section class="task-input-section">
    <div class="input-row">
      <input type="text" id="taskInput" placeholder="Enter new task" />
      <button onclick="addTask()">Add</button>
    </div>
    <hr class="divider" />
    <div class="checkbox-group">
      <label><input type="checkbox" id="getCheckbox" /> ğŸ’³ Payments to Get</label>               
      <label><input type="checkbox" id="serviceCheckbox" /> ğŸ› ï¸ Service</label>
      <label><input type="checkbox" id="leadsCheckbox" /> ğŸ“¦ Leads</label>      
      <label><input type="checkbox" id="officeCheckbox" /> ğŸ¢ Office</label>
      <label><input type="checkbox" id="reminderCheckbox" /> ğŸ”” Personal</label>   
      <label><input type="checkbox" id="doCheckbox" /> ğŸ’³ Payments to Do</label>
    </div>
  </section>

    <div class="todo-box" id="getBox">
      <div class="box-title">ğŸ’µ Get-Payments</div>
      <div class="tasks"></div>
    </div>
    <div class="todo-box" id="serviceBox">
      <div class="box-title">ğŸ› ï¸ Service</div>
      <div class="tasks"></div>
    </div>
    <div class="todo-box" id="leadsBox">
      <div class="box-title">ğŸ¯ Leads</div>
      <div class="tasks"></div>
    </div>
    <div class="todo-box" id="doBox">
      <div class="box-title">ğŸ’° Do-Payments</div>
      <div class="tasks"></div>
    </div>
    <div class="todo-box" id="officeBox">
      <div class="box-title">ğŸ¢ Office</div>
      <div class="tasks"></div>
    </div>
    <div class="todo-box" id="personalBox">
      <div class="box-title">ğŸ”” Personal</div>
      <div class="tasks"></div>
    </div>
  </section>
</body>


<script>
const categoryBoxes = [
  'Get-Payments', 'service', 'Leads',
  'do-Payments', 'Office', 'Personal'
];

// Load tasks from localStorage on page load
window.onload = () => {
  const savedTasks = JSON.parse(localStorage.getItem("istosTasks") || "[]");
  savedTasks.forEach(({ text, category }) => {
    const container = document.querySelector(`#${category}Box .tasks`);
    const taskElement = createTaskElement(text, category);
    container.appendChild(taskElement);
  });
};

function addTask() {
  const taskText = getTaskInput();
  if (!taskText) return;

  const assignedBox = getSelectedCategory();
  const tasksContainer = document.querySelector(`#${assignedBox}Box .tasks`);
  const taskElement = createTaskElement(taskText, assignedBox);

  tasksContainer.appendChild(taskElement);
  saveTask(taskText, assignedBox);
  clearTaskInput();
  clearCategorySelection();
}

function getTaskInput() {
  return document.getElementById('taskInput').value.trim();
}

function clearTaskInput() {
  document.getElementById('taskInput').value = '';
}

function getSelectedCategory() {
  for (const box of categoryBoxes) {
    if (document.getElementById(`${box}Checkbox`).checked) {
      return box;
    }
  }
  return document.getElementById('OthersCheckbox').checked ? 'others' : 'others';
}

function clearCategorySelection() {
  categoryBoxes.forEach(box => {
    document.getElementById(`${box}Checkbox`).checked = false;
  });
  document.getElementById('OthersCheckbox').checked = false;
}

function createTaskElement(text, category) {
  const taskDiv = document.createElement('div');
  taskDiv.className = 'task-item';

  const taskContent = document.createElement('span');
  taskContent.textContent = text;

  const removeBtn = document.createElement('span');
  removeBtn.textContent = 'âœ•';
  removeBtn.className = 'remove-btn';
  removeBtn.title = 'Remove task';
  removeBtn.style.cursor = 'pointer';
  removeBtn.style.marginLeft = '12px';
  removeBtn.onclick = () => {
    taskDiv.remove();
    deleteTask(text, category);
  };

  taskDiv.appendChild(taskContent);
  taskDiv.appendChild(removeBtn);

  return taskDiv;
}

function saveTask(text, category) {
  const tasks = JSON.parse(localStorage.getItem("istosTasks") || "[]");
  tasks.push({ text, category });
  localStorage.setItem("istosTasks", JSON.stringify(tasks));
}

function deleteTask(text, category) {
  let tasks = JSON.parse(localStorage.getItem("istosTasks") || "[]");
  tasks = tasks.filter(task => !(task.text === text && task.category === category));
  localStorage.setItem("istosTasks", JSON.stringify(tasks));
}
</script>

</body>
</html>
